#pragma once

#include <vector>
#include <SFML/Graphics.hpp>
#include "StaticObject.h"
#include "Pedestrian.h"

// ???? ?????? ???????? (???? 1024×1024)
constexpr int CHUNK_SIZE = 1024;

class Chunk {
public:
    // xIndex, yIndex ?? ??????? ?????? ???? (?? ????? ??? ???????)
    Chunk(int cx, int cy);
    ~Chunk();

    // ????? ????? ?? ?????? (???? ????? ????? ?????)
    void load();

    // ????? ????? ?? ?????? ???????? (???? ????? ???? ?? ?????)
    void unload();

    // ???? ?? ?????????? ?????? ???
    void draw(sf::RenderTarget& target);

    // ????? ?? ?????????? ????? ?????? (???? ????? ???)
    void update(float dt);

    // ???? ????? ?????? ????? (????? ???)
    sf::Vector2f getCenterPosition() const;

    // ??? ?????? ???? ?????
    bool isLoaded() const;

    // ??????? ?????? (???? ?????? ??? ??????)
    int getXIndex() const;
    int getYIndex() const;

private:
    int xIndex;
    int yIndex;
    bool loaded;

    // ????????? ?????? ???? ?????? (???? ???????, ????? ??????)
    std::vector<StaticObject*> staticObjs;

    // ????? ??? (Pedestrian) ???? ??????
    std::vector<Pedestrian*> peds;
};
